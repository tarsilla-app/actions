name: NodeJS Publish
inputs:
  config:
    required: true
runs:
  using: composite
  steps:
    - name: Checkout reusable action repository
      uses: actions/checkout@v4
      
    - name: Validate config
      run: node ./publish/static/validate-config.js
      shell: bash
      env:
        CONFIG: ${{ inputs.config }}

    - id: brew
      if: ${{ fromJson(inputs.config).brew }}
      uses: tarsilla-app/actions/publish/base/brew@main
      with:
        tap: ${{ fromJson(inputs.config).brew.tap }}